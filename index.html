  <!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>BLOCK GAMES</title>
  <link rel="manifest" href="manifest.json">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
  header {
  height: 60px;
  font-size: 20px;
  background: #020824;

  display: flex;
  align-items: center;
  justify-content: center;
  }
  body {
    margin: 0;
    background: #020824;
    color: white;
    font-family: sans-serif;
    overflow: hidden;
  }

  header {
    text-align: center;
    padding: 10px 0;
    font-weight: bold;
  }

  #gameScreen, #searchScreen {
    position: absolute;
    top: 40px;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #searchScreen {
    display: none;
    flex-direction: column;
  }

  canvas {
    background: black;
    touch-action: none;
  }

  input {
    width: 80%;
    max-width: 400px;
    padding: 12px;
    font-size: 18px;
    border-radius: 8px;
    border: none;
  }
</style>
</head>

<body>
<div id="score">SCORE : 0</div>
<header>BLOCK GAMES</header>

<div id="gameScreen">
  <canvas id="game"></canvas>
</div>

<div id="searchScreen">
  <form action="https://duckduckgo.com/" method="GET">
    <input name="q" placeholder="Search…" autofocus>
  </form>
</div>

<script>
  let score = 0;
const scoreEl = document.getElementById("score");
/* ===== 5回タップで切り替え ===== */
let taps = 0;
document.addEventListener("click", () => {
  taps++;
  if (taps >= 5) {
    taps = 0;

    if (searchScreen.style.display === "flex") {
      // 検索 → ゲーム
      searchScreen.style.display = "none";
      gameScreen.style.display = "flex";
    } else {
      // ゲーム → 検索
      gameScreen.style.display = "none";
      searchScreen.style.display = "flex";
    }
  }
});
/* ===== Canvas ===== */
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

/* ヘッダー高さ */
const headerHeight = 60;

/* ===== パドル ===== */
const paddle = {
  w: 100,
  h: 12,
  x: 0,
  y: 0
};

function resetPaddle() {
  paddle.x = (canvas.width - paddle.w) / 2;
  paddle.y = canvas.height - paddle.h - 10;
}

/* ===== ボール ===== */
const ball = {
  r: 6,
  x: 0,
  y: 0,
  vx: 4,
  vy: -4
};

function resetBall() {
  ball.x = canvas.width / 2;
  ball.y = canvas.height / 2;
  ball.vx = 4 * (Math.random() > 0.5 ? 1 : -1);
  ball.vy = -4;
}

/* ===== リサイズ ===== */
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight - headerHeight;
  resetPaddle();
}

resize();
window.addEventListener("resize", resize);

/* ===== タッチ操作 ===== */
canvas.addEventListener("touchmove", e => {
  const rect = canvas.getBoundingClientRect();
  paddle.x = e.touches[0].clientX - rect.left - paddle.w / 2;

  // 画面外に出ないように
  if (paddle.x < 0) paddle.x = 0;
  if (paddle.x + paddle.w > canvas.width) {
    paddle.x = canvas.width - paddle.w;
  }
});

/* ===== 描画 ===== */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // パドル
  ctx.fillStyle = "white";
  ctx.fillRect(paddle.x, paddle.y, paddle.w, paddle.h);

  // ボール
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
  ctx.fill();
}

/* ===== 更新 ===== */
function update() {
  ball.x += ball.vx;
  ball.y += ball.vy;

  // 壁反射
  if (ball.x < ball.r || ball.x > canvas.width - ball.r) {
    ball.vx *= -1;
  }
  if (ball.y < ball.r) {
    ball.vy *= -1;
  }

  // パドル反射
  if (
    ball.y + ball.r > paddle.y &&
    ball.x > paddle.x &&
    ball.x < paddle.x + paddle.w
  ) {
    ball.vy = -Math.abs(ball.vy);
    ball.y = paddle.y - ball.r;
  }

  // 落下
  if (ball.y > canvas.height) {
    resetBall();
  }
}

/* ===== ループ ===== */
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

resetBall();
loop();
