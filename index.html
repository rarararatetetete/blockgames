<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>BLOCK GAMES</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      background: #111;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
    }
    #logo {
      font-size: 28px;
      font-weight: bold;
      padding: 15px;
      user-select: none;
    }
    canvas {
      background: #000;
      display: block;
      margin: 0 auto;
    }
    #secret {
      display: none;
      padding: 10px;
    }
    input {
      width: 80%;
      padding: 8px;
      font-size: 16px;
    }
    button {
      padding: 8px 12px;
      font-size: 16px;
    }
    iframe {
      width: 100%;
      height: 70vh;
      border: none;
      margin-top: 10px;
      background: #fff;
    }
  </style>
</head>
<body>

<div id="logo">BLOCK GAMES</div>

<canvas id="game" width="320" height="400"></canvas>

<div id="secret">
  <p>Ê§úÁ¥¢</p>
  <input id="q" placeholder="Ê§úÁ¥¢„ÉØ„Éº„Éâ" />
  <button onclick="search()">üîç</button>
  <iframe id="result"></iframe>
</div>

<script>
/* ===== „Ç≤„Éº„É† ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let ball = { x: 160, y: 300, vx: 2, vy: -2, r: 6 };
let paddle = { x: 120, w: 80 };
let blocks = [];

for (let y = 0; y < 3; y++) {
  for (let x = 0; x < 5; x++) {
    blocks.push({ x: x * 60 + 10, y: y * 25 + 40, alive: true });
  }
}

canvas.addEventListener("touchmove", e => {
  paddle.x = e.touches[0].clientX - 40;
});

function loop() {
  ctx.clearRect(0,0,320,400);

  // ball
  ball.x += ball.vx;
  ball.y += ball.vy;

  if (ball.x < 0 || ball.x > 320) ball.vx *= -1;
  if (ball.y < 0) ball.vy *= -1;

  if (ball.y > 390 &&
      ball.x > paddle.x &&
      ball.x < paddle.x + paddle.w) {
    ball.vy *= -1;
  }

  blocks.forEach(b => {
    if (b.alive &&
        ball.x > b.x && ball.x < b.x + 50 &&
        ball.y > b.y && ball.y < b.y + 20) {
      b.alive = false;
      ball.vy *= -1;
    }
  });

  // draw
  ctx.fillRect(paddle.x, 380, paddle.w, 8);
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI*2);
  ctx.fill();

  blocks.forEach(b => {
    if (b.alive) ctx.fillRect(b.x, b.y, 50, 20);
  });

  requestAnimationFrame(loop);
}
loop();

/* ===== Èö†„ÅóÊ©üËÉΩÔºà5Âõû„Çø„ÉÉ„ÉóÔºâ===== */
const logo = document.getElementById("logo");
const secret = document.getElementById("secret");
let taps = 0;
let last = 0;

logo.addEventListener("touchstart", () => {
  const now = Date.now();
  if (now - last < 600) {
    taps++;
  } else {
    taps = 1;
  }
  last = now;

  if (taps === 5) {
    secret.style.display = "block";
    taps = 0;
  }
});

/* ===== Ê§úÁ¥¢ÔºàÂ±•Ê≠¥‰øùÂ≠ò„Å™„ÅóÔºâ===== */
function search() {
  const q = document.getElementById("q").value;
  document.getElementById("result").src =
    "https://www.bing.com/search?q=" + encodeURIComponent(q);
}
</script>

</body>
</html>
